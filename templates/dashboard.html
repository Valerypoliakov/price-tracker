{% extends "base.html" %}
{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
    <h2>–ú–æ–∏ —Ç–æ–≤–∞—Ä—ã</h2>
    <a href="/add_product" class="btn btn-primary">+ –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</a>
</div>

{% if products %}
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 20px;">
        {% for product in products %}
        <div class="card">
            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                <span class="store-badge store-{{ product.store }}">
                    {% if product.store == 'ozon' %}Ozon
                    {% elif product.store == 'wildberries' %}Wildberries
                    {% elif product.store == 'yandex_market' %}–Ø–Ω–¥–µ–∫—Å.–ú–∞—Ä–∫–µ—Ç
                    {% elif product.store == 'megamarket' %}MegaMarket
                    {% endif %}
                </span>
                <a href="/delete_product/{{ product.id }}" class="btn btn-danger" style="padding: 4px 10px; font-size: 12px;"
                   onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä?')">‚úï</a>
            </div>

            <h3 style="font-size: 15px; margin-bottom: 12px; line-height: 1.4;">{{ product.name }}</h3>

            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                <div>
                    <div style="font-size: 24px; font-weight: 700; color: #2c3e50;">
                        {% if product.current_price %}
                            {{ "{:,.0f}".format(product.current_price) }} ‚ÇΩ
                        {% else %}
                            ‚Äî
                        {% endif %}
                    </div>
                    {% if product.target_price %}
                        <div style="font-size: 13px; color: #666;">
                            –¶–µ–ª—å: {{ "{:,.0f}".format(product.target_price) }} ‚ÇΩ
                            {% if product.current_price and product.current_price <= product.target_price %}
                                <span style="color: #27ae60; font-weight: 600;">‚úì –î–æ—Å—Ç–∏–≥–Ω—É—Ç–∞!</span>
                            {% endif %}
                        </div>
                    {% endif %}
                </div>
            </div>

            <div style="display: flex; gap: 8px;">
                <a href="/product/{{ product.id }}" class="btn btn-primary" style="flex: 1; text-align: center; font-size: 13px;">
                    üìà –ò—Å—Ç–æ—Ä–∏—è
                </a>
                <a href="{{ product.url }}" target="_blank" class="btn" style="flex: 1; text-align: center; font-size: 13px; background: #f0f0f0;">
                    üõí –í –º–∞–≥–∞–∑–∏–Ω
                </a>
            </div>
        </div>
        {% endfor %}
    </div>
{% else %}
    <div class="card" style="text-align: center; padding: 60px;">
        <div style="font-size: 48px; margin-bottom: 16px;">üõí</div>
        <h3 style="margin-bottom: 8px;">–ù–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤</h3>
        <p style="color: #666; margin-bottom: 24px;">–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π —Ç–æ–≤–∞—Ä –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ü–µ–Ω—ã</p>
        <a href="/add_product" class="btn btn-primary">+ –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</a>
    </div>
{% endif %}
{% endblock %}